<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}EduTest SMA{% endblock %}</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --gold-1: #FFD700;
      --gold-2: #FFA500;
      --gold-3: #FF8C00;
      --gold-dark: #B8860B;
      --cream: #FFFDF0;
      --warm-white: #FEFEFE;
      --text-dark: #1A1200;
      --text-mid: #4A3800;
      --text-light: #8B6914;
      --shadow-gold: 0 4px 24px rgba(255, 165, 0, 0.3);
      --shadow-deep: 0 8px 40px rgba(184, 134, 11, 0.2);
      --radius: 16px;
      --radius-sm: 8px;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--cream);
      color: var(--text-dark);
      min-height: 100vh;
    }
    /* Navbar */
    .navbar {
      background: linear-gradient(135deg, #1A1200 0%, #3D2B00 50%, #1A1200 100%);
      padding: 0 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 64px;
      position: sticky; top: 0; z-index: 100;
      box-shadow: 0 2px 20px rgba(0,0,0,0.4);
    }
    .navbar-brand {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      font-weight: 900;
      background: linear-gradient(135deg, var(--gold-1), var(--gold-2));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      text-decoration: none;
    }
    .navbar-nav { display: flex; gap: 0.5rem; align-items: center; }
    .nav-link {
      color: rgba(255,220,100,0.8);
      text-decoration: none;
      padding: 0.4rem 0.9rem;
      border-radius: 20px;
      font-size: 0.88rem;
      font-weight: 500;
      transition: all 0.2s;
    }
    .nav-link:hover { background: rgba(255,215,0,0.15); color: var(--gold-1); }
    .nav-link.active { background: linear-gradient(135deg, var(--gold-1), var(--gold-2)); color: #1A1200 !important; font-weight: 600; }
    .btn-logout {
      background: rgba(255,100,100,0.15);
      color: #ff9999;
      border: 1px solid rgba(255,100,100,0.3);
      padding: 0.35rem 0.9rem;
      border-radius: 20px;
      text-decoration: none;
      font-size: 0.85rem;
      transition: all 0.2s;
    }
    .btn-logout:hover { background: rgba(255,100,100,0.25); }
    .user-badge {
      color: rgba(255,220,100,0.6);
      font-size: 0.8rem;
      padding: 0 0.5rem;
      border-left: 1px solid rgba(255,215,0,0.2);
    }
    /* Alerts */
    .alerts { padding: 1rem 2rem 0; max-width: 1100px; margin: 0 auto; }
    .alert {
      padding: 0.75rem 1.25rem;
      border-radius: var(--radius-sm);
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      font-weight: 500;
    }
    .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .alert-danger { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    .alert-warning { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
    /* Main */
    .main-content { max-width: 1100px; margin: 0 auto; padding: 2rem; }
    /* Cards */
    .card {
      background: white;
      border-radius: var(--radius);
      padding: 1.75rem;
      box-shadow: 0 2px 16px rgba(184,134,11,0.1);
      border: 1px solid rgba(255,215,0,0.15);
    }
    .card-gold {
      background: linear-gradient(135deg, #FFF9E0 0%, #FFFDF0 100%);
      border: 1px solid rgba(255,200,0,0.3);
    }
    /* Buttons */
    .btn {
      display: inline-flex; align-items: center; gap: 0.4rem;
      padding: 0.6rem 1.4rem;
      border-radius: 30px;
      font-weight: 600;
      font-size: 0.9rem;
      text-decoration: none;
      border: none;
      cursor: pointer;
      transition: all 0.25s;
      font-family: 'DM Sans', sans-serif;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--gold-1) 0%, var(--gold-2) 100%);
      color: #1A1200;
      box-shadow: var(--shadow-gold);
    }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 30px rgba(255,165,0,0.45); }
    .btn-secondary { background: #1A1200; color: var(--gold-1); }
    .btn-secondary:hover { background: #3D2B00; transform: translateY(-2px); }
    .btn-outline {
      background: transparent;
      border: 2px solid var(--gold-2);
      color: var(--gold-dark);
    }
    .btn-outline:hover { background: var(--gold-1); color: #1A1200; }
    .btn-danger { background: #dc3545; color: white; }
    .btn-danger:hover { background: #c82333; }
    .btn-sm { padding: 0.35rem 0.85rem; font-size: 0.8rem; }
    /* Forms */
    .form-group { margin-bottom: 1.25rem; }
    .form-label { display: block; font-weight: 600; color: var(--text-mid); margin-bottom: 0.4rem; font-size: 0.9rem; }
    .form-control {
      width: 100%;
      padding: 0.65rem 1rem;
      border: 2px solid rgba(255,200,0,0.25);
      border-radius: var(--radius-sm);
      font-family: 'DM Sans', sans-serif;
      font-size: 0.95rem;
      background: white;
      color: var(--text-dark);
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .form-control:focus { outline: none; border-color: var(--gold-2); box-shadow: 0 0 0 3px rgba(255,165,0,0.15); }
    select.form-control { cursor: pointer; }
    textarea.form-control { resize: vertical; min-height: 80px; }
    /* Tables */
    .table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
    .table th { background: linear-gradient(135deg, #1A1200, #3D2B00); color: var(--gold-1); padding: 0.75rem 1rem; text-align: left; font-weight: 600; }
    .table td { padding: 0.7rem 1rem; border-bottom: 1px solid rgba(255,215,0,0.1); }
    .table tr:hover td { background: rgba(255,215,0,0.05); }
    /* Badges */
    .badge {
      display: inline-block;
      padding: 0.2rem 0.6rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .badge-success { background: #d4edda; color: #155724; }
    .badge-danger { background: #f8d7da; color: #721c24; }
    .badge-warning { background: #fff3cd; color: #856404; }
    .badge-info { background: #d1ecf1; color: #0c5460; }
    /* Progress */
    .progress { background: rgba(255,215,0,0.2); border-radius: 10px; height: 10px; overflow: hidden; }
    .progress-bar { height: 100%; background: linear-gradient(90deg, var(--gold-1), var(--gold-2)); border-radius: 10px; transition: width 0.6s ease; }
    /* Section header */
    .section-header { margin-bottom: 1.75rem; }
    .section-header h1 { font-family: 'Playfair Display', serif; font-size: 2rem; color: var(--text-dark); }
    .section-header p { color: var(--text-light); margin-top: 0.3rem; }
    /* Divider */
    .divider { border: none; border-top: 1px solid rgba(255,215,0,0.2); margin: 1.5rem 0; }
    /* Mobile */
    @media (max-width: 768px) {
      .navbar { padding: 0 1rem; }
      .main-content { padding: 1rem; }
      .navbar-nav .nav-link span { display: none; }
    }
  </style>
  {% block extra_css %}{% endblock %}
</head>
<body>
  {% if session.user_id %}
  <nav class="navbar">
    <a class="navbar-brand" href="{{ url_for('dashboard') if not session.is_admin else url_for('admin_dashboard') }}">
      âœ¦ EduTest SMA
    </a>
    <div class="navbar-nav">
      {% if session.is_admin %}
        <a class="nav-link" href="{{ url_for('admin_dashboard') }}"><span>Dashboard</span></a>
        <a class="nav-link" href="{{ url_for('admin_siswa') }}"><span>Siswa</span></a>
        <a class="nav-link" href="{{ url_for('admin_hasil') }}"><span>Hasil</span></a>
        <a class="nav-link" href="{{ url_for('admin_soal') }}"><span>Soal</span></a>
        <a class="nav-link" href="{{ url_for('admin_materi') }}"><span>Materi</span></a>
      {% else %}
        <a class="nav-link" href="{{ url_for('dashboard') }}"><span>Beranda</span></a>
        <a class="nav-link" href="{{ url_for('pretest') }}"><span>Pre-Test</span></a>
        <a class="nav-link" href="{{ url_for('materi') }}"><span>Materi</span></a>
        <a class="nav-link" href="{{ url_for('posttest') }}"><span>Post-Test</span></a>
      {% endif %}
      <span class="user-badge">{{ session.nama }}</span>
      <a class="btn-logout" href="{{ url_for('logout') }}">Keluar</a>
    </div>
  </nav>
  {% endif %}

  <div class="alerts">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endfor %}
    {% endwith %}
  </div>

  {% block content %}{% endblock %}
  {% block extra_js %}{% endblock %}
</body>
</html>